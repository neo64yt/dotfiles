!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=35)}({0:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a}));const r=(e,t)=>e&&t?`${e}_${t}`:"",s=(e,t)=>`${e}#channel:${t}`,o=(e,t,n)=>{if(e.length<t.length)return"";const r=e.indexOf(t);if(-1===r)return"";const s=r+t.length,o=e.indexOf(n,s);let i="";return o!==s?i=-1!==o&&o>s||-1!==o?e.substring(s,o):e.substring(s):""===n&&(i=e.substring(s)),i},i=(e,t)=>{const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(e[s]!==t[s])return!1}return!0},a=()=>"complete"===document.readyState&&"visible"===document.visibilityState},1:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i}));let r=null;const s=()=>r,o=e=>{r?e(!0):(chrome.runtime.sendMessage("mnojpmjdmbbfmejpflffifhffcmidifd",{type:"SupportsGreaselion"},(function(t){if(!chrome.runtime.lastError&&t&&t.supported)return r=chrome.runtime.connect("mnojpmjdmbbfmejpflffifhffcmidifd",{name:"Greaselion"}),void e(!0)})),setTimeout(()=>{if(!r)return r=chrome.runtime.connect("jidkidbbcafjabdphckchenhfomhnfma",{name:"Greaselion"}),void e(!0)},100))},i=(e,t)=>{e&&r&&r.postMessage({type:"GreaselionError",mediaType:e,data:{errorMessage:t}})}},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>chrome.i18n?chrome.i18n.getMessage(e,t):e},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i}));const r=(e,t)=>e?t?`https://twitter.com/intent/user?user_id=${t}&screen_name=${e}`:`https://twitter.com/${e}/`:"",s=(e,t)=>{if(!e)return null;if(!t)return e.getAttribute("data-tweet-id");const n=e.querySelector("a[href*='/status/']");if(!n||!n.href)return null;const r=n.href.match(/status\/(\d+)/);return!r||r.length<2?null:r[1]},o=e=>{const t=new URLSearchParams(e.search);if(!t)return"";const n=t.get("screen_name");if(n)return unescape(n);if(!e.pathname)return"";const r=e.pathname.split("/").filter(e=>e);return r&&0!==r.length?r[0]:""},i=e=>{if(["/","/about","/home","/login","/logout","/messages","/privacy","/search","/settings","/tos"].includes(e))return!0;const t=["/account/","/compose/","/explore","/hashtag/","/i/","/messages/","/notifications","/settings/","/who_to_follow/","/?login","/?logout"];for(const n of t)if(e.startsWith(n))return!0;return!1}},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(1);let s=!1,o=!1;const i=(e,t,n)=>{if(!e||s)return;s=!0;const o=Object(r.b)();o&&(o.postMessage({type:"RegisterOnCompletedWebRequest",mediaType:e,data:{urlPatterns:[t]}}),o.onMessage.addListener(e=>{switch(e.type){case"OnCompletedWebRequest":n(e.mediaType,e.details)}}))},a=(e,t,n,s)=>{if(!e||o)return;o=!0;const i=Object(r.b)();i&&(i.postMessage({type:"RegisterOnSendHeadersWebRequest",mediaType:e,data:{urlPatterns:t,extra:n}}),i.onMessage.addListener((function(e){if(e.data)switch(e.type){case"OnSendHeadersWebRequest":s(e.mediaType,e.data.details)}})))}},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(0);const s=["authorization","x-csrf-token","x-guest-token"],o=/[; ]_twitter_sess=([^\s;]*)/;let i=null,a={};const l=e=>{if(!e)return null;const t=e.match(o);return t?unescape(t[1]):null},c=()=>a,u=e=>{if(!e)return!1;let t={};for(const n of e)if("Cookie"===n.name){const e=l(n.value);e!==i&&(i=e,t={})}else(s.includes(n.name)||n.name.startsWith("x-twitter-"))&&(t[n.name]=n.value);return!r.a(a,t)&&(a=t,!0)}},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l}));var r=n(1),s=n(16),o=n(5);const i=(e,t)=>new Promise((n,i)=>{if(!e||!t)return void i(new Error("Invalid parameters"));const a=Object(s.a)();if(0===Object.keys(a).length)return void i(new Error("Missing auth headers"));const l=Object(r.b)();l?(l.postMessage({type:"OnAPIRequest",mediaType:o.b,data:{name:e,url:t,init:{credentials:"include",headers:{...a},referrerPolicy:"no-referrer-when-downgrade",method:"GET",redirect:"follow"}}}),l.onMessage.addListener((function t(r){if(l){if(!r||!r.data)return l.onMessage.removeListener(t),void i(new Error("Invalid message"));if("OnAPIResponse"===r.type){if(!r.data.name||!r.data.response&&!r.data.error)return l.onMessage.removeListener(t),void i(new Error("Invalid message"));if(r.data.name===e)return l.onMessage.removeListener(t),r.data.error?void i(new Error(r.data.error)):void n(r.data.response)}}else i(new Error("Invalid port"))}))):i(new Error("Invalid port"))}),a=async e=>{if(!e)return Promise.reject(new Error("Invalid parameters"));return i("GetTweetDetails","https://api.twitter.com/1.1/statuses/show.json?id="+e)},l=async e=>{if(!e)return Promise.reject(new Error("Invalid parameters"));return i("GetUserDetails","https://api.twitter.com/1.1/users/show.json?screen_name="+e)}},3:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1);let s=!1;const o=(e,t)=>{if(!e||s)return;s=!0;const n=Object(r.b)();n&&(n.postMessage({type:"RegisterOnUpdatedTab",mediaType:e}),n.onMessage.addListener((function(e){if(e.data)switch(e.type){case"OnUpdatedTab":t(e.data.changeInfo)}})))}},35:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(3),o=n(15),i=n(16),a=n(0),l=n(13),c=n(20),u=n(5),d=n(14);let p=null,f=!0;const m=e=>{if("Enter"!==e.key&&"Space"!==e.code)return;const t=e.target;if(!t)return;const n=t.shadowRoot;if(!n)return;const r=n.querySelector(".js-actionButton");r&&r.click()},y=(e,t,n)=>{const r=document.createElement("div");r.className="ProfileTweet-action js-tooltip action-brave-tip",r.style.display="inline-block",r.style.minWidth="80px",r.style.textAlign=n?"right":"start",r.setAttribute("role","button"),r.setAttribute("tabindex","0"),r.setAttribute("data-original-title",l.a("twitterTipsHoverText")),r.addEventListener("keydown",m);const s=document.createElement("button");s.className="ProfileTweet-actionButton u-textUserColorHover js-actionButton",s.style.background="transparent",s.style.border="0",s.style.color="#657786",s.style.cursor="pointer",s.style.display="inline-block",s.style.fontSize="16px",s.style.lineHeight="1",s.style.outline="0",s.style.padding="0 2px",s.style.position="relative",s.type="button",s.onclick=function(n){if(f)((e,t)=>e&&t?c.a(t).then(e=>({user:{id:e.user.id_str,screenName:e.user.screen_name,fullName:e.user.name,favIconUrl:e.user.profile_image_url_https.replace("_normal","")},post:{id:t,timestamp:e.created_at,text:e.text}})).catch(e=>(console.error(`Failed to fetch tweet details for ${t}: ${e.message}`),Promise.reject(e))):Promise.reject(new Error("Invalid parameters")))(e,t).then(e=>{e&&g(e)}).catch(t=>{console.error(`Failed to fetch tweet metadata for ${e}:`,t)});else{const n=((e,t)=>{if(!e)return null;const n=e.getElementsByClassName("tweet-text");if(!n||0===n.length)return null;const r=n[0],s=e.getElementsByClassName("js-short-timestamp");if(!s||0===s.length)return null;const o=s[0].getAttribute("data-time")||"";return{user:{id:e.getAttribute("data-user-id")||"",screenName:e.getAttribute("data-screen-name")||"",fullName:e.getAttribute("data-name")||"",favIconUrl:""},post:{id:t,timestamp:o,text:r.innerText||""}}})(e,t);n&&g(n)}n.stopPropagation()},f&&e&&(e=>{if(!e||!location.pathname.includes("/status/"))return!1;return!!e.querySelector("a[href*='how-to-tweet']")})(e)&&(s.style.marginTop="12px");const o=document.createElement("div");o.className="IconContainer js-tooltip",o.style.display="inline-block",o.style.lineHeight="0",o.style.position="relative",o.style.verticalAlign="middle",s.appendChild(o);const i=document.createElement("span");i.className="Icon Icon--medium",i.style.background="transparent",i.style.content='url(\'data:image/svg+xml;utf8,<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 105 100" style="enable-background:new 0 0 105 100;" xml:space="preserve"><style type="text/css">.st1{fill:%23662D91;}.st2{fill:%239E1F63;}.st3{fill:%23FF5000;}.st4{fill:%23FFFFFF;stroke:%23FF5000;stroke-width:0.83;stroke-miterlimit:10;}</style><title>BAT_icon</title><g id="Layer_2_1_"><g id="Layer_1-2"><polygon class="st1" points="94.8,82.6 47.4,55.4 0,82.9 "/><polygon class="st2" points="47.4,0 47.1,55.4 94.8,82.6 "/><polygon class="st3" points="0,82.9 47.2,55.9 47.4,0 "/><polygon class="st4" points="47.1,33.7 28,66.5 66.7,66.5 "/></g></g></svg>\')',i.style.display="inline-block",i.style.fontSize="18px",i.style.fontStyle="normal",i.style.height="16px",i.style.marginTop="5px",i.style.position="relative",i.style.verticalAlign="baseline",i.style.width="16px",o.appendChild(i);const a=document.createElement("span");a.className="ProfileTweet-actionCount",a.style.color="#657786",a.style.display="inline-block",a.style.fontSize="12px",a.style.fontWeight="bold",a.style.lineHeight="1",a.style.marginLeft="6px",a.style.position="relative",a.style.verticalAlign="text-bottom",s.appendChild(a);const u=document.createElement("span");u.className="ProfileTweet-actionCountForPresentation",u.textContent=l.a("twitterTipsIconLabel"),a.appendChild(u);const d=r.attachShadow({mode:"open"});d.appendChild(s);const p=document.createElement("style");return p.appendChild(document.createTextNode(".ProfileTweet-actionButton :hover { color: #FB542B }")),d.appendChild(p),r},g=e=>{if(!e)return;const t=d.a(e.user.screenName,e.user.id),n=a.c(u.b,e.user.id),s=e.user.screenName,o=e.user.screenName,i=Object(r.b)();i&&i.postMessage({type:"TipUser",mediaType:u.b,data:{url:t,publisherKey:n,publisherName:s,publisherScreenName:o,favIconUrl:e.user.favIconUrl,postId:e.post.id,postTimestamp:e.post.timestamp,postText:e.post.text}})},h=()=>{clearTimeout(p),f=!0;let e=document.querySelectorAll('[role="article"]');0===e.length&&(e=document.querySelectorAll(".tweet"),f=!1);for(let t=0;t<e.length;++t){const n=d.c(e[t],f);if(!n)continue;let r;if(r=f?e[t].querySelector('[role="group"]'):e[t].querySelector(".js-actions"),!r)continue;if(0===r.getElementsByClassName("action-brave-tip").length){const s=(r.querySelectorAll(":scope > div").length||0)>3,o=y(e[t],n,s);r.appendChild(o)}}p=setTimeout(h,3e3)},b=(e,t)=>{e===u.b&&t&&t.requestHeaders&&i.b(t.requestHeaders)&&h()},v=e=>{e&&e.url&&h()};chrome.extension.inIncognitoContext||(Object(r.a)(e=>{e?(a.d()?h():document.addEventListener("readystatechange",(function(){a.d()&&h()})),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&h()})),o.b(u.b,u.d,u.c,b),s.a(u.b,v)):console.error("Failed to initialize communications port")}),console.info("Greaselion script loaded: twitterInlineTipping.ts"))},5:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i}));const r="twitter",s="twitter.com",o=["https://api.twitter.com/1.1/*"],i=["requestHeaders","extraHeaders"]}});